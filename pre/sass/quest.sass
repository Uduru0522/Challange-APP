%flex-centeralize
    display: flex
    align-items: center
    justify-content: center

%transform-centeralize
    position: absolute
    top: 50%
    left: 50%
    transform: translate(-50%, -50%)

:root
    --stranger-radar: polygon(0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%, 0% 0%)

*
    box-sizing: border-box

// Header
.quest-header
    @extend %flex-centeralize
    position: absolute
    top: 0
    left: 0
    width: 100vw
    height: 120px
    background-color: #F1CE61
    
    > span
        display: block
        position: absolute
        width: 100%
        bottom: 20%

        color: white
        font-size: 20pt
        --letter-space-val: 25px
        letter-spacing: var(--letter-space-val)
        margin-left: var(--letter-space-val)
        text-align: center

#quest-create-new .quest-header
    > span::after
        content: "發起新任務"

#quest-detail>.quest-header, #quest-main>.quest-header, #quest-filtered>.quest-header
    > span::after
        content: "任務"

// Quest Main Page Relatexd
#quest-main
    overflow-y: scroll
    -ms-overflow-style: none
    scrollbar-width: none
    &::-webkit-scrollbar
        display: none

    .dummy
        height: 20vh
        width: 100vw

.filter-button
    margin: 5px 0 5px 10px
    display: inline-block
    height: calc(100vh / 12)
    width: fit-content
    line-height: calc(100vh / 12)

    & *
        vertical-align: middle
        color: #E9B83E

    img
        height: 60%
    span
        margin-left: 10px
        font-size: 1.3em
        height: 1.3em
        letter-spacing: 0.1em

.quest-peek
    width: 92vw
    height: calc(25000vh / 735)
    box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.75)
    border-radius: 24px
    margin: 0 auto 25px
    overflow: hidden
    background-color: #EAF6F7

    .peek-title
        padding: 0 6%
        display: flex
        align-items: center
        justify-content: space-between
        width: 100%
        height: 19%
        background-color: #EAF6F7
        // border-bottom: black solid 3px

        span
            display: inline-block
            vertical-align: middle

        span:nth-child(1)
            font-size: 2.7vh
            letter-spacing: 0.4vh
        span:nth-child(2)
            font-size: 1em

    .horizontal-scroll-container
        overflow-x: scroll
        white-space: nowrap
        height: 81%
        line-height: 100%
        margin-top: 1%

        &::-webkit-scrollbar
            visibility: hidden

        .quest-block
            display: inline-block
            width: 41.5%
            height:  calc(16500vh / 735)
            vertical-align: middle
            position: relative
            top: 50%
            transform: translateY(-50%)
            margin: 0 2px 0 9px
            border-radius: 20px
            box-shadow: 1px 1px 12px rgba(0, 0, 0, 0.75)
            overflow: hidden
            background-color: white

            .type
                @extend %flex-centeralize
                margin: 0 auto
                height: calc(860% / 31)
                width: calc(1000% / 13)
                border-bottom: #ECE569 solid 2px
                span
                    font-size: 2.5vh
                    letter-spacing: 6vw
                    margin-right: -6vw
                    margin-top: 1vh

            .title
                @extend %flex-centeralize
                width: 100%
                height: calc(70% - calc(700% / 31))
                span
                    display: block
                    padding: 3%
                    white-space: normal
                    font-size: 2.5vh
                    line-height: 3vh
                    text-align: center
                    

            .accept-button
                @extend %flex-centeralize
                position: absolute
                left: -20%
                right: -20%
                bottom: -1%
                top: 70%
                border-radius: 50% 50% 0% 100% / 100% 100% 0% 0% 
                //border: black solid 2px
                background-color: #ECE569

                span
                    font-size: 2.2vh
                    letter-spacing: 2.2vh
                    margin-right: -2.2vh
                    margin-top: 1vh
                
            .qblock-qid
                diaplay: none

@keyframes _stranger-full
    0%
        background-position: top -120vh left 0%
        border-radius: 50% 50% 0 0 / 20% 20% 0 0
    100%
        height: 90vh
        background-position: top 0vh left 0%
        border-radius: 5vw 5vw 0 0
    
@keyframes _stranger-hidden
    0%
        background-position: top 0vh left 0%
        border-radius: 5vw 5vw 0 0
    100%
        position: fixed
        bottom: 0
        height: 30vh
        background-position: top -120vh left 0%
        border-radius: 50% 50% 0 0 / 20% 20% 0 0

@keyframes _fade-in
    0%
        opacity: 0%
    100%
        opacity: 100%

@keyframes _fade-out
    0%
        opacity: 100%
    100%
        opacity: 0%

.animate-fade-out
    animation: _fade-out 1.5s ease forwards
.animate-fade-in
    animation: _fade-in 1.5s ease forwards

#quest-detail
    background-color: #FFFFFF
    overflow-y: scroll
    overflow-x: none

    &::-webkit-scrollbar
        display: none

    #quest-detail-header
        background-color: #FBE1B1
        position: fixed
        top: 0
        left: 0
        flex-direction: column
        z-index: 1

        img, #quest-points
            height: 5vh
            width: 5vh
            position: absolute
            top: 50%

        img
            display: block
            left: 2.5vh
            transform: translateY(-50%) scaleX(-1)

        #quest-points
            @extend %flex-centeralize
            right: 2.5vh
            text-align: center
            border-radius: 2.5vh
            background-color: #A6A6A6
            transform: translateY(-50%)
            
            span
                font-size: 2vh
                letter-spacing: 0

        #quest-tag
            @extend %flex-centeralize
            width: 24vw
            background-color: transparent
            border-right: #E9B83E solid 1px
            border-left: #E9B83E solid 1px
            
            span
                color: #E9B83E
                font-size: 3vh
                letter-spacing: 1.5vh
                margin-right: -1.5vh
            

        #quest-title-text
            margin-top: 0.5vh
            display: block
            color: black
            font-size: 3vh

    .qd-title
        @extend %flex-centeralize
        position: relative
        left: 50%
        transform: translateX(-50%)
        width: 44vw
        height: 5vh
        border-radius: 8px
        background-color: #EB931D
        margin-top: 2vh
        
        span
            color: white
            font-size: 2.5vh
            letter-spacing: 0.8vh
            margin-right: -0.8vh

    .qd-body
        position: relative
        display: block
        height: fit-content
        width: 82vw
        margin: 2vh auto 0
        color: black
        font-size: 2.4vh
        word-wrap: break-word

    #quest-intro
        margin-top: 15vh

        #people-indicate
            @extend %flex-centeralize
            width: 22.5vw
            height: 4.33vh
            border: #EB931D solid 2px
            background-color: transparent
            border-radius: 8px
            margin-left: 9vw
            margin-top: 2vh

            span
                font-size: 2.2vh
                letter-spacing: 1vh
                margin-right: -1vh
                color: #EB931D

    #quest-detail-button
        @extend %flex-centeralize
        position: relative
        width: calc(80vw / 3)
        height: 4.9vh
        border-radius: 8px
        margin-left: calc(200vw / 3)
        margin-top: 2vh
        span
            font-size: 3vh

        &.can-accept
            background-color: #EB931D
            color: white
    
        &.already-accept
            background-color: transparent
            color: #EB931D
            border: #EB931D solid 1px
    #quest-submit-field
        #quest-submit-text
            margin: 10px 5vw
            width: 90vw
            position: relative
            height: 40px
            border: black solid 1px
            border-radius: 10px
            float: none

        #preview
            @extend %flex-centeralize
            margin: 10px auto
            box-shading: 2px 2px 5px rgba(0, 0, 0, 0.75)
            position: relative
            width: 90vw
            height: calc(810vw / 16)
            border-radius: 20px
            background-color: #C0C0C0

        #quest-submit-button
            @extend %flex-centeralize
            margin: 10px auto
            position: relative
            width: 90vw
            height: 40px
            background-color: #C0C0C0
            border-radius: 10px

            span 
                font-size: 3vh

        .dummy
            width: 100vw
            height: 20vh
    
    #quest-history
        #img-grid-wrapper
            display: grid
            grid-auto-flow: row
            row-gap: 2vw
            column-gap: 2vw
            width: 100vw
            max-width: 100vw
            grid-template-columns: repeat(3, 1fr)
            grid-auto-rows: 32vw
            margin-top: 2vh

            div
                display: inline-block
                vertical-align: middle
                box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.25), -1px -1px 2px rgba(0, 0, 0, 0.25)
                background-color: #FBE1B1
                .img-grid-item
                    vertical-align: middle
                    object-fit: cover
                    max-width: 100%
                    height: 100%
                
    #show-stranger
        position: fixed
        bottom: 0
        width: 100vw
        z-index: 1
        height: 30vh
        background-image: linear-gradient(180deg, rgba(207,233,234,1) 0%, rgba(207,233,234,1) 50%, rgba(127,200,190,1) 80%, rgba(255,255,255,1) 100%)
        background-size: 100vw 150vh

        #show-stranger-title
            position: absolute
            width: 100vw
            text-align: center
            font-size: 3vh
            letter-spacing: 2vw
            color: #11A196
            top: 2vh
            
        .shape-chevron
            position: absolute
            text-align: center
            padding: 2px
            left: 0
            right: 0
            margin: 0 auto
            height: 0px
            width: 15%

            &:before
                content: ''
                position: absolute
                top: 0
                left: 0
                height: 100%
                width: 51%
                background: white
                transform: skew(0deg, -15deg)
            &:after
                content: ''
                position: absolute
                top: 0
                right: 0
                height: 100%
                width: 50%
                background: white
                transform: skew(0deg, 15deg)
    
        :nth-child(2).shape-chevron
            top: 10vh
        :nth-child(3).shape-chevron
            top: 13vh

    .stranger-hidden
        animation: _stranger-hidden .5s ease forwards

    .stranger-full
        animation: _stranger-full .5s ease forwards
        position: relative

        #full-stranger
            & > div:nth-child(1)
                height: 20vh
                width: 100vw
                display: flex
                flex-direction: row
                justify-content: center
                
                position: relative
                margin-top: 5%
                padding: 0 3% 0 5%
                
                #stranger-icon
                    margin-right: 8vw
                    img
                        border-radius: 50%
                        border: 2vh white solid
                        max-height: 100%

                #stranger-info-flex
                    width: 48%
                    display: flex
                    flex-direction: column
                    justify-content: space-between
                    align-items: flex-start
                    padding: 2vh 0

                    *
                        color: black

                    #stranger-id
                        font-size: 3.2vh
                    #stranger-hashtag
                        font-size: 2.7vh
                    #stranger-req 
                        @extend %flex-centeralize
                        background-color: #ece569
                        border-radius: 1vh
                        box-shadow: 0.2vh 0.2vh 0.6vh rgb(0 0 0 / 60%)
                        width: 100%
                        height: 30%
                        font-size: 3vh
                        margin-left: -1.5vw
                        span
                            color: white

            & > div:nth-child(2)                                   
                height: 19vh
                width: 100vw
                display: flex
                flex-direction: row
                justify-content: center
                position: relative
                margin-top: 4vh
                padding: 0 10% 0 9%

                #stranger-top-stat-flex
                    display: flex
                    flex-direction: column
                    justify-content: space-between
                    width: 40%
                    margin-right: 8vw
            
                    *
                        font-size: 2.9vh

                #stranger-radar
                    position: relative
                    width: 60%

                    display: flex
                    justify-content: center

                    img
                        position: absolute
                        max-height: 100%

                    img#stranger-radar-inner
                        clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)
                        filter: invert(75%) sepia(65%) saturate(1547%) hue-rotate(326deg) brightness(105%) contrast(101%)

@keyframes _select
    100%
        border: none
        background-color: #E9B83E
        color: white
        border-radius-top: 15vw 15vw 0 0

// Filter
#filter

    *
        z-index: 1
    
    #filter-return-area
        position: absolute
        top: 0
        left: 0
        width: 100%
        height: 100%
        z-index: -1

    #filter-block
        width: calc(1300vw / 14)
        height: calc(55500vh / 735)
        background-color: #FFFFFF
        margin-top: calc(calc(1900vh / 147) / 2)
        position: relative
        border-radius: 0 40px 40px 0
        overflow-x: hidden
        overflow-y: scroll

        #filter-header
            @extend %flex-centeralize
            width: 100%
            height: calc(7000% / 555)
            background-color: #CFE9EA

            span
                font-size: 4vh
                letter-spacing: 2.5vw
                margin-left: 6vw
            
        .filter-title
            position: relative
            width: 100%
            height: calc(1000% / 111)
            display: flex
            align-items: center
            
            span
                font-size: 2.8vh
                letter-spacing: 1.5vw
                margin-left: 6vw
                vertical-align: middle

        .grid-wrapper
            display: grid
            margin-left: 6vw
            grid-auto-flow: row
            column-gap: 15px
            row-gap: 15px

            .filter-type
                position: relative
                border: #E9B83E solid 2px
                background-color: white
                color: black
                box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.75)         
                border-radius: 5px
                       
                span
                    font-size: 2.5vh
                    position: absolute
                    top: 50%
                    left: calc(50% + 0.6vh)
                    transform: translate(-50%, -50%)
                    letter-spacing: 1.2vh
                    white-space: nowrap

            .selected
                animation: _select 0.3s ease forwards
                
        .grid-wrapper#grid-type-options
            grid-template-columns: repeat(3, calc(8000vh / 735))
            grid-template-rows: repeat(2, calc(140vw / 14))

        .grid-wrapper#grid-people-options
            grid-template-columns: repeat(3, calc(8000vh / 735))
            grid-template-rows: calc(140vw / 14)

        .range-container
            position: relative
            height: 10%
            width: 75%
            background-color: #C5DBD7
            margin-left: 6vw
            -webkit-appearance: none
            display: flex
            justify-content: space-evenly
            align-items: center

            input
                -webkit-appearance: none
                width: 33.3%
                height: 66.6%
                border-radius: 10px
                text-align: center
                border: none

            span
                width: 6.6%
                height: 2px
                background-color: black

        input[name="location"]
            height: 6.6%
            width: 50%
            margin-left: 6vw
            border-radius: 10px
            border: #C5DBD7 solid 3px
            background: url("../resources/quest/search.png") no-repeat
            background-size: contain
            background-origin: padding-box
            font-size: 2.5vh
            padding-left: 40px

        #filter-footer 
            position: absolute
            bottom: 0
            left: 0
            height: 10.8%
            width: 100%
            background-image: linear-gradient(to bottom, #E1E1E1, #FEFEFE)
            display: inline-block

            .filter-footer-button
                @extend %flex-centeralize
                height: 62.5%
                width: calc(435vw / 18)
                border-radius: 8px
                box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.75), -1px -1px 4px rgba(0, 0, 0, 0.75)
                position: relative
                top: 50%
                transform: translateY(-50%)
                margin-right: 2vh
                float: right

                span
                    font-size: 3vh
                    letter-spacing: 2.5vw
                    margin-right: -2.5vw

            #filter-confirm
                background-color: #D0CECE

// Quest List
#quest-filtered
    #quest-filtered-bg
        position: absolute
        z-index: -1
        height: 80vh
        bottom: 0
        left: 0
        width: 100vw
        border-radius: 20px 20px 0 0
        background-color: #EAF6F7

        #quest-filtered-bg-title
            position: absolute
            top: 0
            left: 0
            width: 100vw
            height: 10%
            span
                font-size: 2vh

    #quest-list
        position: absolute
        top: calc(50vh / 3)
        bottom: 22vw
        left: 0
        right: 0
        overflow-y: scroll


        .qblock
            @extend %flex-centeralize
            position: relative
            width: 92vw
            height: 12.5vh
            background-color: white
            border-radius: 3.2vh
            margin: 10px auto 0
            box-shadow: 1vw 1vw 2vw rgba(0, 0, 0, 0.25), .5vw .5vw 1vw rgba(0, 0, 0, 0.25)
            overflow: hidden

            .qblock-type
                @extend %flex-centeralize
                position: absolute
                left: 0
                top: 0
                height: 100%
                width: 20%
                border-radius: 0% 100% 50% 49% / 100% 0% 100% 0% 
                background-color: #ECE569
                
                span
                    color: black
                    writing-mode: vertical-lr
                    white-space: normal
                    font-size: 3.5vh
                    line-height: 5.5vh

            .qblock-title
                width: 45%
                span
                    font-size: 2.5vh
                    line-height: 3vh
                    white-space: normal

            .qblock-points
                @extend %flex-centeralize
                position: absolute
                top: 10%
                right: 4.5vw
                height: 4.2vh
                width: 4.2vh
                border-radius: 50%
                background-color: #9C9C9C

                span
                    font-size: 2.5vh

            .quest-id
                display: none

            .qblock-state
                @extend %flex-centeralize
                position: absolute
                bottom: 10%
                right: 4.5vw
                width: 21.3%
                height: 33.3%
                border-radius: 1vh
                box-shadow: 1vw 1vw 2vw rgba(0, 0, 0, 0.25), .5vw .5vw 1vw rgba(0, 0, 0, 0.25)

                span
                    font-size: 2.2vh

                &.can-accept
                    background-color: #EB931D
                    span 
                        color: white
            
                &.already-accept
                    background-color: transparent
                    border: 1px solid #EB931D
                    span
                        color: #EB931D

@keyframes _quest-more-expand
    0%
        height: 50px
    100%
        height: 225px

@keyframes _quest-more-shrink
    0%
        height: 225px
    100%
        height: 50px
        

.quest-more
    position: fixed
    bottom: 11.5vh
    right: 6.5vw
    width: 60px
    height: 50px
    border-radius: 25px
    background-color: #E2D6A8

    *
        position: absolute

    .quest-more-closed
        height: 50px
        width: 100%
        display: flex
        justify-content: center
        align-items: center

        .quest-more-option
            max-width: 100%
    .quest-more-open
        width: 100%
        height: 100%
        display: flex
        justify-content: space-between
        align-items: center
        flex-direction: column
        padding-top: 20px

        div
            width: 100%
            height: 65px
            position: relative

        span
            position: relative
            color: white
            font-size: 9pt
            width: 100%
            text-align: center
            display: block

        img 
            max-width: 70%
            position: relative
            top: 0
            left: 50%
            transform: translateX(-50%)

        .quest-more-new
            img    
            span
        .quest-more-ongoing
            img
            span
        .quest-more-x
            height: 45px
            img
                max-width: 45%

.quest-more-expand
    animation: _quest-more-expand 0.5s ease forwards

.quest-more-shrink
    animation: _quest-more-shrink 0.5s ease forwards

// New Quest
#quest-create-new
    overflow: hidden
    #quest-create-inputs
        display: block
        width: 600vw
        height: 60vh
        
        position: absolute
        top: 25%
        left: 0

        .quest-create-step
            height: 100%
            width: 100vh
            position: absolute
            top: 0

        #quest-create-part1
            left: 0
            .quest-create-steptitle
                margin-top: 12%

            input
                position: absolute
                width: 80%
                max-width: calc(100vw - 60px)
                height: 9vh

                position: absolute
                left: 30px

                background-color: transparent
                border: none
                border-bottom: #EB931D solid 2px
                outline: 0
                
                font-size: 32pt
                padding-top: 20px
                color: #727272
                text-align: center

        #quest-create-part2
            left: 100vw
            .quest-create-steptitle
                margin-top: 12%

        #quest-create-part3
            left: 200vw
            .quest-create-steptitle
                margin-top: 12%

        #quest-create-part4
            left: 300vw

        #quest-create-part5
            left: 400vw

        #quest-create-part6
            left: 500vw
            .quest-create-steptitle
                margin-top: 12%

        .quest-create-steptitle
            position: relative
            display: block
            // margin-top: 12%
            left: 30px
            font-size: 20pt
            color: #EB931D
        .quest-create-steptitle-ps
            position: relative
            display: block
            left: 23px
            font-size: 12pt
            color: #EB931D
        .quest-create-grid-wrapper
            position: relative
            left: 24px
            margin-top: 15px

            display: grid
            width: calc(100vw - 48px)
            height: 35vh

            grid-template-columns: repeat(auto-fill, minmax(80px, 105px))
            grid-template-rows: repeat(auto-fill, 40px)
            row-gap: 10px 
            justify-items: center
            justify-content: space-between
            align-items: center
        
        .quest-create-owbtn
            @extend %flex-centeralize
            position: relative
            height: 100%
            width: 100%

            border-radius: 5px
            border: black solid 1px

            span
                font-size: 15pt
                letter-spacing: 2px
                margin-left: 2px

        textarea
            position: relative
            margin-top: 15px
            left: 30px
            width: calc(100vw - 60px)
            height: 30vh
            border: #EB931D solid 2px
            outline: 0
            border-radius: 15px
            padding: 5px
            font-size: 15pt
            color: #333333
            padding: 15px

    #quest-create-progress
        position: absolute
        bottom: 15vh
        left: 50%
        transform: translateX(-50%)
        width: auto
        height: auto

        display: flex
        justify-content: space-evenly
        align-items: center
        
        .quest-create-progress-dot
            width: 8px
            height: 8px
            margin: 0 3px
            background-color: #EB931D
            border-radius: 4px
            
    #quest-create-next, #quest-create-finish
        display: block
        position: absolute
        width: 8vh
        height: 8vh
        bottom: 22vh
        right: 3vh

        img
            max-width: 100%

    #quest-create-success
        display: none
        width: 100vw
        height: 100vh
        position: absolute
        top: 0
        bottom: 0
        background-color: rgba(0, 0, 0, 0.4)

        > div
            position: absolute
            top: 50%
            left: 50%
            transform: translate(-50%, -50%)
            text-align: center
            width: 85%
            height: 45vh
            background-color: white
            display: flex
            flex-direction: column
            justify-content: space-between
            padding: 8% 0 20% 0
            border-radius: 25px

            > span
                color: #EB931D
                font-size: 3.2vh
        
        #quest-create-success-confirm
            @extend %flex-centeralize
            position: absolute
            height: 11%
            width: 40%
            bottom: 4%
            left: 50%
            transform: translateX(-50%)
            background-color: #EB931D
            border-radius: 7px

            > span
                font-size: 3.2vh
                color: white
            


// New Quest Animations
@keyframes _tostep2
    0%
        left: 0
    100%
        left: -100vw

@keyframes _tostep3
    0%
        left: -100vw
    100%
        left: -200vw

@keyframes _tostep4
    0%
        left: -200vw
    100%
        left: -300vw

@keyframes _tostep5
    0%
        left: -300vw
    100%
        left: -400vw

@keyframes _tostep6
    0%
        left: -400vw
    100%
        left: -500vw

.quest-create-tostep2
    animation: _tostep2 0.5s ease-in-out forwards
.quest-create-tostep3
    animation: _tostep3 0.5s ease-in-out forwards
.quest-create-tostep4
    animation: _tostep4 0.5s ease-in-out forwards
.quest-create-tostep5
    animation: _tostep5 0.5s ease-in-out forwards
.quest-create-tostep6
    animation: _tostep6 0.5s ease-in-out forwards

// Select / Deselet orange-white button
@keyframes _owbtn-select
    0%
        background-color: #FFFFFF
        border: 2px solid #EB931D
        color: #000000
        box-shadow: none
        transform: translate(0, 0)
    100%
        background-color: #EB931D
        color: #FFFFFF
        border: none
        box-shadow: 4px 4px 5px rgba(0, 0, 0, 0.45)
        transform: translate(-2px, -2px)

@keyframes _owbtn-deselect
    0%
        background-color: #EB931D
        color: #FFFFFF
        border: none
        box-shadow: 4px 4px 5px rgba(0, 0, 0, 0.45)
        transform: translate(-2px, -2px)
    100%
        background-color: #FFFFFF
        border: 2px solid #EB931D
        color: #000000
        box-shadow: none
        transform: translate(0, 0)

.owbtn-deselect
    animation: _owbtn-deselect 0.4s ease forwards
.owbtn-select
    animation: _owbtn-select 0.4s ease forwards
        
// Progress dot expand/shrink
@keyframes _progress-on
    0%
        width: 8px
    100%
        width: 30px
    
@keyframes _progress-off
    0%
        width: 30px
    100%
        width: 8px

.pd-on
    animation: _progress-on 0.5s ease forwards
.pd-off
    animation: _progress-off 0.5s ease forwards

// Indicate disabled items
.disabled-grayscale
    filter: grayscale(100%)